<div class="register-container">
  <div class="card">
    <div class="card-header text-center">
      <h2>{{ 'AUTH.REGISTER' | translate }}</h2>
    </div>
    <div class="card-body">
      <!-- Error Alert -->
      <div *ngIf="error" class="alert alert-danger">
        {{ error }}
      </div>

      <!-- Registration Form -->
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <!-- Username Field -->
          <div class="col-12 mb-3">
            <label for="username">{{ 'AUTH.USERNAME' | translate }} *</label>
            <input 
              type="text" 
              id="username" 
              formControlName="username" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': registerForm.get('username')?.invalid && registerForm.get('username')?.touched }"
            />
            <div *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched" class="invalid-feedback">
              <div *ngIf="registerForm.get('username')?.errors?.['required']">
                {{ 'AUTH.USERNAME' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}
              </div>
              <div *ngIf="registerForm.get('username')?.errors?.['minlength']">
                {{ 'AUTH.USERNAME' | translate }} {{ 'COMMON.MIN_LENGTH' | translate:{ length: 4 } }}
              </div>
            </div>
          </div>

          <!-- Email Field -->
          <div class="col-12 mb-3">
            <label for="email">{{ 'AUTH.EMAIL' | translate }} *</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': registerForm.get('email')?.invalid && registerForm.get('email')?.touched }"
            />
            <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="invalid-feedback">
              <div *ngIf="registerForm.get('email')?.errors?.['required']">
                {{ 'AUTH.EMAIL' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}
              </div>
              <div *ngIf="registerForm.get('email')?.errors?.['email']">
                {{ 'COMMON.INVALID_EMAIL' | translate }}
              </div>
            </div>
          </div>

          <!-- First Name Field -->
          <div class="col-md-6 mb-3">
            <label for="firstName">{{ 'AUTH.FIRST_NAME' | translate }} *</label>
            <input 
              type="text" 
              id="firstName" 
              formControlName="firstName" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched }"
            />
            <div *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched" class="invalid-feedback">
              {{ 'AUTH.FIRST_NAME' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}
            </div>
          </div>

          <!-- Last Name Field -->
          <div class="col-md-6 mb-3">
            <label for="lastName">{{ 'AUTH.LAST_NAME' | translate }} *</label>
            <input 
              type="text" 
              id="lastName" 
              formControlName="lastName" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched }"
            />
            <div *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched" class="invalid-feedback">
              {{ 'AUTH.LAST_NAME' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}
            </div>
          </div>

          <!-- Phone Number Field -->
          <div class="col-12 mb-3">
            <label for="phoneNumber">{{ 'AUTH.PHONE' | translate }}</label>
            <input 
              type="tel" 
              id="phoneNumber" 
              formControlName="phoneNumber" 
              class="form-control"
            />
          </div>

          <!-- Password Field -->
          <div class="col-md-6 mb-3">
            <label for="password">{{ 'AUTH.PASSWORD' | translate }} *</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': registerForm.get('password')?.invalid && registerForm.get('password')?.touched }"
            />
            <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="invalid-feedback">
              <div *ngIf="registerForm.get('password')?.errors?.['required']">
                {{ 'AUTH.PASSWORD' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}
              </div>
              <div *ngIf="registerForm.get('password')?.errors?.['minlength']">
                {{ 'AUTH.PASSWORD' | translate }} {{ 'COMMON.MIN_LENGTH' | translate:{ length: 6 } }}
              </div>
            </div>
          </div>

          <!-- Confirm Password Field -->
          <div class="col-md-6 mb-3">
            <label for="confirmPassword">{{ 'AUTH.CONFIRM_PASSWORD' | translate }} *</label>
            <input 
              type="password" 
              id="confirmPassword" 
              formControlName="confirmPassword" 
              class="form-control" 
              [ngClass]="{ 'is-invalid': registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched }"
            />
            <div *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched" class="invalid-feedback">
              {{ 'AUTH.CONFIRM_PASSWORD' | translate }} {{ 'COMMON.IS_REQUIRED' | translate }}
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="d-grid mt-4">
          <button 
            type="submit" 
            class="btn btn-primary" 
            [disabled]="registerForm.invalid || loading"
          >
            <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            {{ 'AUTH.SIGN_UP' | translate }}
          </button>
        </div>
      </form>

      <!-- Login Link -->
      <div class="text-center mt-3">
        <p>{{ 'AUTH.HAVE_ACCOUNT' | translate }} <a (click)="navigateToLogin()" class="text-decoration-none cursor-pointer">{{ 'AUTH.SIGN_IN' | translate }}</a></p>
      </div>
    </div>
  </div>
</div>